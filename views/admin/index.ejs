<style>
  .contact .info-container {
    background-color: #fff;
    box-shadow: 0px 2px 25px rgba(0, 0, 0, 0.1);
    height: 100%;
    padding: 20px;
    border-radius: 10px 0 0 10px;
    box-shadow: 0px 2px 25px rgba(0, 0, 0, 0.1);
    border-radius: 30px;
  }
  .info-item {
    box-shadow: 0px 2px 25px rgba(0, 0, 0, 0.3);
    border-radius: 30px;
    padding: 5px 10px;
    margin: 0.9rem 0;
    display: flex;
    align-items: center;
    justify-content: space-around;
  }
</style>

<h1 class="mb-3">
  <strong>Libray Management System</strong>
  NACIT
</h1>

<section class="row" style="display: flex; justify-content: space-between">
  <div class="card col-3">
    <div class="card-body">
      <div class="row">
        <div class="col mt-0">
          <h5 class="card-title">Books Created</h5>
        </div>

        <div class="col-auto">
          <div class="stat text-primary">
            <i class="align-middle" data-feather="book-open"></i>
          </div>
        </div>
      </div>
      <h1 class="mt-1 mb-3"><%=stats.books%></h1>
    </div>
  </div>

  <div class="card col-3">
    <div class="card-body">
      <div class="row">
        <div class="col mt-0">
          <h5 class="card-title">Books Issued</h5>
        </div>

        <div class="col-auto">
          <div class="stat text-primary">
            <i class="align-middle" data-feather="send"></i>
          </div>
        </div>
      </div>
      <h1 class="mt-1 mb-3"><%=stats.loans%></h1>
    </div>
  </div>

  <div class="card col-3">
    <div class="card-body">
      <div class="row">
        <div class="col mt-0">
          <h5 class="card-title">Reservations</h5>
        </div>

        <div class="col-auto">
          <div class="stat text-primary">
            <i class="align-middle" data-feather="anchor"></i>
          </div>
        </div>
      </div>
      <h1 class="mt-1 mb-3"><%=stats.reservations%></h1>
    </div>
  </div>
</section>

<div class="card">
  <div class="card-header">
    <div class="row">
      <div class="col-6">
        <h5 class="card-title mb-0">Reports</h5>
      </div>
      <div class="col-6">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-bs-toggle="tab"
              href="#today"
              role="tab"
            >
              <span class="hidden-sm-up"></span>
              <span class="hidden-xs-down">Today</span>
              <i class="mdi mdi-cash-multiple"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#week" role="tab">
              <span class="hidden-sm-up"></span>
              <span class="hidden-xs-down">This Week</span>
              <i class="mdi mdi-readability"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#month" role="tab">
              <span class="hidden-sm-up"></span>
              <span class="hidden-xs-down">This Month</span>
              <i class="mdi mdi-readability"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="card-body py-3">
    <div class="tab-content tabcontent-border">
      <div class="tab-pane active" id="today" role="tabpanel">
        <div class="chart chart-sm">
          <canvas id="todays-stats"></canvas>
        </div>
      </div>

      <div class="tab-pane" id="week" role="tabpanel">
        <div class="col-12">
          <div class="flex-fill w-100">
            <div class="card-header">
              <h5 class="card-title">This Week</h5>
              <h6 class="card-subtitle text-muted">
                A line chart is a way of plotting data points on a line.
              </h6>
            </div>
            <div class="card-body">
              <div class="chart">
                <canvas id="week-stats"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-pane" id="month" role="tabpanel">
        <div class="col-12">
          <div class="card-header">
            <h5 class="card-title">This Month</h5>
            <h6 class="card-subtitle text-muted">
              A bar chart provides a way of showing data values represented as
              vertical bars.
            </h6>
          </div>
          <div class="card-body">
            <div class="chart">
              <canvas id="month-stats"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<section id="contact" class="contact">
  <div class="container" data-aos="fade-up">
    <div class="row">
      <!-- Reservations -->
      <div class="col-lg-6">
        <div class="info-container">
          <div class="card-header">
            <h2 class="text-dark">Reservations</h2>
          </div>
          <div class="card-body">
            <div class="col-12">
              <% reservations.forEach(r => { %>
                <div class="info-item d-flex col-12">
                  <div class="col-2">
                    <div class="stat" style="background-color: rgba(0, 0, 0, 0.295)">
                      <i style="color: #000 !important" class="align-middle" data-feather="anchor"></i>
                    </div>
                  </div>
                
                  <div class="col-7">
                    <div class="mt-3">
                      <h5 class="text-dark">
                        <span><i data-feather="user"></i></span> <%=r.student%>
                      </h5>
                      <p class="">
                        <span><i data-feather="book-open"></i></span> <%=r.book%>
                      </p>
                    </div>
                  </div>
                
                  <div class="col-3">
                    <div class="row">
                      <div class="col-6">
                        <a href="/reservation/approve/<%=r.id%>" class="stat" style="background-color: rgb(253, 135, 1)">
                          <i class="align-middle" style="color: #fff !important" data-feather="check-circle"></i>
                        </a>
                      </div>
                
                      <div class="col-6">
                        <a href="/reservation/decline/<%=r.id%>" class="stat" style="background-color: rgb(253, 1, 1)">
                          <i class="align-middle" style="color: #fff !important" data-feather="slash"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              <% }); %>
            </div>
          </div>
        </div>
      </div>

      <!-- Rentals -->
      <div class="col-lg-6">
        <div class="info-container">
          <div class="card-header">
            <h2 class="text-dark">Loaned Books</h2>
          </div>
          <div class="card-body">
            <div class="col-12">
              <% loans.forEach(l=> { %>
              <div class="info-item d-flex p-3">
                <div class="col-10">
                  <div>
                    <h5 class="text-dark">
                      <span><i data-feather="user"></i></span> <%=l.student%>
                    </h5>
                    <p class="mb-1">
                      <span><i data-feather="book-open"></i></span> <%=l.book%>
                    </p>
                  </div>
                </div>

                <div class="col-2">
                  <div class="row">
                    <div class="col-12">
                      <a
                        href="/admin/loans"
                        class="stat"
                        style="
                          background: linear-gradient(45deg, red, orangered);
                        "
                      >
                        <i
                          class="align-middle"
                          style="color: #fff !important; transform: scale(2)"
                          data-feather="alert-circle"
                        ></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <% }); %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
